"use strict";(self.webpackChunkFrontend=self.webpackChunkFrontend||[]).push([[682],{3175:(ht,k,c)=>{c.d(k,{a:()=>A});var C=c(2340),u=c(4004),d=c(262),t=c(2843),x=c(5e3),v=c(520),b=c(263);let A=(()=>{class y{constructor(h,f){this.http=h,this.authService=f,this.url=`${C.N.url_api}/chat`}getAllChats(){return this.http.get(this.url).pipe((0,u.U)(h=>(h=this.cleanChats(h),this.sortChats(h))),(0,d.K)(h=>this.handleError(h)))}getChatId(h){return this.http.post(`${this.url}/getChatId`,{to:h}).pipe((0,d.K)(f=>this.handleError(f)))}getChatInfo(h){return this.http.get(`${this.url}/${h}`).pipe((0,d.K)(f=>this.handleError(f)))}blockChat(h){return this.http.get(`${this.url}/block/${h}`).pipe((0,d.K)(f=>this.handleError(f)))}unlockChat(h){return this.http.get(`${this.url}/unlock/${h}`).pipe((0,d.K)(f=>this.handleError(f)))}getFromUser(h){return this.http.get(`${this.url}/getFromUser/${h}`).pipe((0,d.K)(f=>this.handleError(f)))}handleError(h){return 401===h.status?(this.authService.logout(),(0,t._)("Unauthorized")):(0,t._)("Error unexpected")}sortChats(h){return h.sort((f,m)=>f.lastMessage?m.lastMessage?f.lastMessage.updatedAt>m.lastMessage.updatedAt?-1:1:f.lastMessage.updatedAt>m.createdAt?-1:1:m.lastMessage?f.updatedAt>m.lastMessage.updatedAt?-1:1:f.updatedAt>m.createdAt?-1:1),h}cleanChats(h){const f=this.authService.getMyUser();return h.filter(U=>U.lastMessage||U.users[0]._id==f._id)}}return y.\u0275fac=function(h){return new(h||y)(x.LFG(v.eN),x.LFG(b.e))},y.\u0275prov=x.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})()},273:(ht,k,c)=>{c.d(k,{$:()=>r});var C={};c.r(C),c.d(C,{Decoder:()=>at,Encoder:()=>Xt,PacketType:()=>p,protocol:()=>Pt});var u={};c.r(u),c.d(u,{Manager:()=>W,Socket:()=>ct,connect:()=>Z,default:()=>Z,io:()=>Z,protocol:()=>Pt});var d=c(5e3),t=c(8306),x=c(3099);const v=Object.create(null);v.open="0",v.close="1",v.ping="2",v.pong="3",v.message="4",v.upgrade="5",v.noop="6";const b=Object.create(null);Object.keys(v).forEach(i=>{b[v[i]]=i});const A={type:"error",data:"parser error"},y="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),w="function"==typeof ArrayBuffer,m=(i,e)=>{const n=new FileReader;return n.onload=function(){const s=n.result.split(",")[1];e("b"+s)},n.readAsDataURL(i)},U=({type:i,data:e},n,s)=>y&&e instanceof Blob?n?s(e):m(e,s):w&&(e instanceof ArrayBuffer||(i=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer)(e))?n?s(e):m(new Blob([e]),s):s(v[i]+(e||"")),O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",S="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let i=0;i<O.length;i++)S[O.charCodeAt(i)]=i;const kt="function"==typeof ArrayBuffer,L=(i,e)=>{if(kt){const n=(i=>{let s,a,l,g,P,e=.75*i.length,n=i.length,o=0;"="===i[i.length-1]&&(e--,"="===i[i.length-2]&&e--);const I=new ArrayBuffer(e),j=new Uint8Array(I);for(s=0;s<n;s+=4)a=S[i.charCodeAt(s)],l=S[i.charCodeAt(s+1)],g=S[i.charCodeAt(s+2)],P=S[i.charCodeAt(s+3)],j[o++]=a<<2|l>>4,j[o++]=(15&l)<<4|g>>2,j[o++]=(3&g)<<6|63&P;return I})(i);return B(n,e)}return{base64:!0,data:i}},B=(i,e)=>"blob"===e&&i instanceof ArrayBuffer?new Blob([i]):i,ut=(i,e)=>{if("string"!=typeof i)return{type:"message",data:B(i,e)};const n=i.charAt(0);return"b"===n?{type:"message",data:L(i.substring(1),e)}:b[n]?i.length>1?{type:b[n],data:i.substring(1)}:{type:b[n]}:A},J=String.fromCharCode(30);function _(i){if(i)return function oe(i){for(var e in _.prototype)i[e]=_.prototype[e];return i}(i)}_.prototype.on=_.prototype.addEventListener=function(i,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+i]=this._callbacks["$"+i]||[]).push(e),this},_.prototype.once=function(i,e){function n(){this.off(i,n),e.apply(this,arguments)}return n.fn=e,this.on(i,n),this},_.prototype.off=_.prototype.removeListener=_.prototype.removeAllListeners=_.prototype.removeEventListener=function(i,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+i];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+i],this;for(var s,o=0;o<n.length;o++)if((s=n[o])===e||s.fn===e){n.splice(o,1);break}return 0===n.length&&delete this._callbacks["$"+i],this},_.prototype.emitReserved=_.prototype.emit=function(i){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+i],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(n){s=0;for(var o=(n=n.slice(0)).length;s<o;++s)n[s].apply(this,e)}return this},_.prototype.listeners=function(i){return this._callbacks=this._callbacks||{},this._callbacks["$"+i]||[]},_.prototype.hasListeners=function(i){return!!this.listeners(i).length};const T="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function D(i,...e){return e.reduce((n,s)=>(i.hasOwnProperty(s)&&(n[s]=i[s]),n),{})}const St=setTimeout,Et=clearTimeout;function Y(i,e){e.useNativeTimers?(i.setTimeoutFn=St.bind(T),i.clearTimeoutFn=Et.bind(T)):(i.setTimeoutFn=setTimeout.bind(T),i.clearTimeoutFn=clearTimeout.bind(T))}function It(i){return"string"==typeof i?function et(i){let e=0,n=0;for(let s=0,o=i.length;s<o;s++)e=i.charCodeAt(s),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(s++,n+=4);return n}(i):Math.ceil(1.33*(i.byteLength||i.size))}class Ut extends Error{constructor(e,n,s){super(e),this.description=n,this.context=s,this.type="TransportError"}}class pt extends _{constructor(e){super(),this.writable=!1,Y(this,e),this.opts=e,this.query=e.query,this.readyState="",this.socket=e.socket}onError(e,n,s){return super.emitReserved("error",new Ut(e,n,s)),this}open(){return("closed"===this.readyState||""===this.readyState)&&(this.readyState="opening",this.doOpen()),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=ut(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}}const H="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),dt={};let ft,gt=0,E=0;function mt(i){let e="";do{e=H[i%64]+e,i=Math.floor(i/64)}while(i>0);return e}function _t(){const i=mt(+new Date);return i!==ft?(gt=0,ft=i):i+"."+mt(gt++)}for(;E<64;E++)dt[H[E]]=E;function Ct(i){let e="";for(let n in i)i.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(i[n]));return e}let vt=!1;try{vt="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(i){}const Rt=vt;function yt(i){const e=i.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!e||Rt))return new XMLHttpRequest}catch(n){}if(!e)try{return new(T[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(n){}}function Lt(){}const qt=null!=new yt({xdomain:!1}).responseType;let Q=(()=>{class i extends _{constructor(n,s){super(),Y(this,s),this.opts=s,this.method=s.method||"GET",this.uri=n,this.async=!1!==s.async,this.data=void 0!==s.data?s.data:null,this.create()}create(){const n=D(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this.opts.xd,n.xscheme=!!this.opts.xs;const s=this.xhr=new yt(n);try{s.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let o in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(o)&&s.setRequestHeader(o,this.opts.extraHeaders[o])}}catch(o){}if("POST"===this.method)try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(o){}try{s.setRequestHeader("Accept","*/*")}catch(o){}"withCredentials"in s&&(s.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(s.timeout=this.opts.requestTimeout),s.onreadystatechange=()=>{4===s.readyState&&(200===s.status||1223===s.status?this.onLoad():this.setTimeoutFn(()=>{this.onError("number"==typeof s.status?s.status:0)},0))},s.send(this.data)}catch(o){return void this.setTimeoutFn(()=>{this.onError(o)},0)}"undefined"!=typeof document&&(this.index=i.requestsCount++,i.requests[this.index]=this)}onError(n){this.emitReserved("error",n,this.xhr),this.cleanup(!0)}cleanup(n){if(null!=this.xhr){if(this.xhr.onreadystatechange=Lt,n)try{this.xhr.abort()}catch(s){}"undefined"!=typeof document&&delete i.requests[this.index],this.xhr=null}}onLoad(){const n=this.xhr.responseText;null!==n&&(this.emitReserved("data",n),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}return i.requestsCount=0,i.requests={},i})();function bt(){for(let i in Q.requests)Q.requests.hasOwnProperty(i)&&Q.requests[i].abort()}"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",bt):"function"==typeof addEventListener&&addEventListener("onpagehide"in T?"pagehide":"unload",bt,!1));const Jt="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,n)=>n(e,0),z=T.WebSocket||T.MozWebSocket,xt="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),G={websocket:class $ extends pt{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),n=this.opts.protocols,s=xt?{}:D(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=xt?new z(e,n,s):n?new z(e,n):new z(e)}catch(o){return this.emitReserved("error",o)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const o=n===e.length-1;U(e[n],this.supportsBinary,a=>{try{this.ws.send(a)}catch(g){}o&&Jt(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const n=this.opts.secure?"wss":"ws";let s="";this.opts.port&&("wss"===n&&443!==Number(this.opts.port)||"ws"===n&&80!==Number(this.opts.port))&&(s=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=_t()),this.supportsBinary||(e.b64=1);const o=Ct(e);return n+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+s+this.opts.path+(o.length?"?"+o:"")}check(){return!!z}},polling:class Bt extends pt{constructor(e){if(super(e),this.polling=!1,"undefined"!=typeof location){const s="https:"===location.protocol;let o=location.port;o||(o=s?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||o!==e.port,this.xs=e.secure!==s}this.supportsBinary=qt&&!(e&&e.forceBase64)}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let s=0;this.polling&&(s++,this.once("pollComplete",function(){--s||n()})),this.writable||(s++,this.once("drain",function(){--s||n()}))}else n()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((i,e)=>{const n=i.split(J),s=[];for(let o=0;o<n.length;o++){const a=ut(n[o],e);if(s.push(a),"error"===a.type)break}return s})(e,this.socket.binaryType).forEach(s=>{if("opening"===this.readyState&&"open"===s.type&&this.onOpen(),"close"===s.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)}),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((i,e)=>{const n=i.length,s=new Array(n);let o=0;i.forEach((a,l)=>{U(a,!1,g=>{s[l]=g,++o===n&&e(s.join(J))})})})(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.query||{};const n=this.opts.secure?"https":"http";let s="";!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=_t()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.opts.port&&("https"===n&&443!==Number(this.opts.port)||"http"===n&&80!==Number(this.opts.port))&&(s=":"+this.opts.port);const o=Ct(e);return n+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+s+this.opts.path+(o.length?"?"+o:"")}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new Q(this.uri(),e)}doWrite(e,n){const s=this.request({method:"POST",data:e});s.on("success",n),s.on("error",(o,a)=>{this.onError("xhr post error",o,a)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,s)=>{this.onError("xhr poll error",n,s)}),this.pollXhr=e}}},Dt=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Yt=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function st(i){const e=i,n=i.indexOf("["),s=i.indexOf("]");-1!=n&&-1!=s&&(i=i.substring(0,n)+i.substring(n,s).replace(/:/g,";")+i.substring(s,i.length));let o=Dt.exec(i||""),a={},l=14;for(;l--;)a[Yt[l]]=o[l]||"";return-1!=n&&-1!=s&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=function Ht(i,e){const s=e.replace(/\/{2,9}/g,"/").split("/");return("/"==e.substr(0,1)||0===e.length)&&s.splice(0,1),"/"==e.substr(e.length-1,1)&&s.splice(s.length-1,1),s}(0,a.path),a.queryKey=function Kt(i,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,o,a){o&&(n[o]=a)}),n}(0,a.query),a}let Ot=(()=>{class i extends _{constructor(n,s={}){super(),n&&"object"==typeof n&&(s=n,n=null),n?(n=st(n),s.hostname=n.host,s.secure="https"===n.protocol||"wss"===n.protocol,s.port=n.port,n.query&&(s.query=n.query)):s.host&&(s.hostname=st(s.host).host),Y(this,s),this.secure=null!=s.secure?s.secure:"undefined"!=typeof location&&"https:"===location.protocol,s.hostname&&!s.port&&(s.port=this.secure?"443":"80"),this.hostname=s.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=s.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=s.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},s),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=function Nt(i){let e={},n=i.split("&");for(let s=0,o=n.length;s<o;s++){let a=n[s].split("=");e[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return e}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(n){const s=Object.assign({},this.opts.query);s.EIO=4,s.transport=n,this.id&&(s.sid=this.id);const o=Object.assign({},this.opts.transportOptions[n],this.opts,{query:s,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new G[n](o)}open(){let n;if(this.opts.rememberUpgrade&&i.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))n="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);n=this.transports[0]}this.readyState="opening";try{n=this.createTransport(n)}catch(s){return this.transports.shift(),void this.open()}n.open(),this.setTransport(n)}setTransport(n){this.transport&&this.transport.removeAllListeners(),this.transport=n,n.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",s=>this.onClose("transport close",s))}probe(n){let s=this.createTransport(n),o=!1;i.priorWebsocketSuccess=!1;const a=()=>{o||(s.send([{type:"ping",data:"probe"}]),s.once("packet",X=>{if(!o)if("pong"===X.type&&"probe"===X.data){if(this.upgrading=!0,this.emitReserved("upgrading",s),!s)return;i.priorWebsocketSuccess="websocket"===s.name,this.transport.pause(()=>{o||"closed"!==this.readyState&&(ue(),this.setTransport(s),s.send([{type:"upgrade"}]),this.emitReserved("upgrade",s),s=null,this.upgrading=!1,this.flush())})}else{const lt=new Error("probe error");lt.transport=s.name,this.emitReserved("upgradeError",lt)}}))};function l(){o||(o=!0,ue(),s.close(),s=null)}const g=X=>{const lt=new Error("probe error: "+X);lt.transport=s.name,l(),this.emitReserved("upgradeError",lt)};function P(){g("transport closed")}function I(){g("socket closed")}function j(X){s&&X.name!==s.name&&l()}const ue=()=>{s.removeListener("open",a),s.removeListener("error",g),s.removeListener("close",P),this.off("close",I),this.off("upgrading",j)};s.once("open",a),s.once("error",g),s.once("close",P),this.once("close",I),this.once("upgrading",j),s.open()}onOpen(){if(this.readyState="open",i.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){let n=0;const s=this.upgrades.length;for(;n<s;n++)this.probe(this.upgrades[n])}}onPacket(n){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",n),this.emitReserved("heartbeat"),n.type){case"open":this.onHandshake(JSON.parse(n.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const s=new Error("server error");s.code=n.data,this.onError(s);break;case"message":this.emitReserved("data",n.data),this.emitReserved("message",n.data)}}onHandshake(n){this.emitReserved("handshake",n),this.id=n.sid,this.transport.query.sid=n.sid,this.upgrades=this.filterUpgrades(n.upgrades),this.pingInterval=n.pingInterval,this.pingTimeout=n.pingTimeout,this.maxPayload=n.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const n=this.getWritablePackets();this.transport.send(n),this.prevBufferLen=n.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let s=1;for(let o=0;o<this.writeBuffer.length;o++){const a=this.writeBuffer[o].data;if(a&&(s+=It(a)),o>0&&s>this.maxPayload)return this.writeBuffer.slice(0,o);s+=2}return this.writeBuffer}write(n,s,o){return this.sendPacket("message",n,s,o),this}send(n,s,o){return this.sendPacket("message",n,s,o),this}sendPacket(n,s,o,a){if("function"==typeof s&&(a=s,s=void 0),"function"==typeof o&&(a=o,o=null),"closing"===this.readyState||"closed"===this.readyState)return;(o=o||{}).compress=!1!==o.compress;const l={type:n,data:s,options:o};this.emitReserved("packetCreate",l),this.writeBuffer.push(l),a&&this.once("flush",a),this.flush()}close(){const n=()=>{this.onClose("forced close"),this.transport.close()},s=()=>{this.off("upgrade",s),this.off("upgradeError",s),n()},o=()=>{this.once("upgrade",s),this.once("upgradeError",s)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?o():n()}):this.upgrading?o():n()),this}onError(n){i.priorWebsocketSuccess=!1,this.emitReserved("error",n),this.onClose("transport error",n)}onClose(n,s){("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",n,s),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(n){const s=[];let o=0;const a=n.length;for(;o<a;o++)~this.transports.indexOf(n[o])&&s.push(n[o]);return s}}return i.protocol=4,i})();const zt="function"==typeof ArrayBuffer,Mt=Object.prototype.toString,Gt="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Mt.call(Blob),Vt="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===Mt.call(File);function it(i){return zt&&(i instanceof ArrayBuffer||(i=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(i):i.buffer instanceof ArrayBuffer)(i))||Gt&&i instanceof Blob||Vt&&i instanceof File}function V(i,e){if(!i||"object"!=typeof i)return!1;if(Array.isArray(i)){for(let n=0,s=i.length;n<s;n++)if(V(i[n]))return!0;return!1}if(it(i))return!0;if(i.toJSON&&"function"==typeof i.toJSON&&1===arguments.length)return V(i.toJSON(),!0);for(const n in i)if(Object.prototype.hasOwnProperty.call(i,n)&&V(i[n]))return!0;return!1}function Wt(i){const e=[],s=i;return s.data=ot(i.data,e),s.attachments=e.length,{packet:s,buffers:e}}function ot(i,e){if(!i)return i;if(it(i)){const n={_placeholder:!0,num:e.length};return e.push(i),n}if(Array.isArray(i)){const n=new Array(i.length);for(let s=0;s<i.length;s++)n[s]=ot(i[s],e);return n}if("object"==typeof i&&!(i instanceof Date)){const n={};for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=ot(i[s],e));return n}return i}function jt(i,e){return i.data=rt(i.data,e),i.attachments=void 0,i}function rt(i,e){if(!i)return i;if(i&&!0===i._placeholder){if("number"==typeof i.num&&i.num>=0&&i.num<e.length)return e[i.num];throw new Error("illegal attachments")}if(Array.isArray(i))for(let n=0;n<i.length;n++)i[n]=rt(i[n],e);else if("object"==typeof i)for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&(i[n]=rt(i[n],e));return i}const Pt=5;var p=(()=>{return(i=p||(p={}))[i.CONNECT=0]="CONNECT",i[i.DISCONNECT=1]="DISCONNECT",i[i.EVENT=2]="EVENT",i[i.ACK=3]="ACK",i[i.CONNECT_ERROR=4]="CONNECT_ERROR",i[i.BINARY_EVENT=5]="BINARY_EVENT",i[i.BINARY_ACK=6]="BINARY_ACK",p;var i})();class Xt{constructor(e){this.replacer=e}encode(e){return e.type!==p.EVENT&&e.type!==p.ACK||!V(e)?[this.encodeAsString(e)]:(e.type=e.type===p.EVENT?p.BINARY_EVENT:p.BINARY_ACK,this.encodeAsBinary(e))}encodeAsString(e){let n=""+e.type;return(e.type===p.BINARY_EVENT||e.type===p.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(n+=e.nsp+","),null!=e.id&&(n+=e.id),null!=e.data&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=Wt(e),s=this.encodeAsString(n.packet),o=n.buffers;return o.unshift(s),o}}class at extends _{constructor(e){super(),this.reviver=e}add(e){let n;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e),n.type===p.BINARY_EVENT||n.type===p.BINARY_ACK?(this.reconstructor=new te(n),0===n.attachments&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else{if(!it(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n))}}decodeString(e){let n=0;const s={type:Number(e.charAt(0))};if(void 0===p[s.type])throw new Error("unknown packet type "+s.type);if(s.type===p.BINARY_EVENT||s.type===p.BINARY_ACK){const a=n+1;for(;"-"!==e.charAt(++n)&&n!=e.length;);const l=e.substring(a,n);if(l!=Number(l)||"-"!==e.charAt(n))throw new Error("Illegal attachments");s.attachments=Number(l)}if("/"===e.charAt(n+1)){const a=n+1;for(;++n&&","!==e.charAt(n)&&n!==e.length;);s.nsp=e.substring(a,n)}else s.nsp="/";const o=e.charAt(n+1);if(""!==o&&Number(o)==o){const a=n+1;for(;++n;){const l=e.charAt(n);if(null==l||Number(l)!=l){--n;break}if(n===e.length)break}s.id=Number(e.substring(a,n+1))}if(e.charAt(++n)){const a=this.tryParse(e.substr(n));if(!at.isPayloadValid(s.type,a))throw new Error("invalid payload");s.data=a}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(n){return!1}}static isPayloadValid(e,n){switch(e){case p.CONNECT:return"object"==typeof n;case p.DISCONNECT:return void 0===n;case p.CONNECT_ERROR:return"string"==typeof n||"object"==typeof n;case p.EVENT:case p.BINARY_EVENT:return Array.isArray(n)&&n.length>0;case p.ACK:case p.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class te{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=jt(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function M(i,e,n){return i.on(e,n),function(){i.off(e,n)}}const ee=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class ct extends _{constructor(e,n,s){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,s&&s.auth&&(this.auth=s.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[M(e,"open",this.onopen.bind(this)),M(e,"packet",this.onpacket.bind(this)),M(e,"error",this.onerror.bind(this)),M(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){if(ee.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');n.unshift(e);const s={type:p.EVENT,data:n,options:{}};if(s.options.compress=!1!==this.flags.compress,"function"==typeof n[n.length-1]){const l=this.ids++,g=n.pop();this._registerAckCallback(l,g),s.id=l}return this.flags.volatile&&(!(this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable)||!this.connected)||(this.connected?(this.notifyOutgoingListeners(s),this.packet(s)):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(e,n){const s=this.flags.timeout;if(void 0===s)return void(this.acks[e]=n);const o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},s);this.acks[e]=(...a)=>{this.io.clearTimeoutFn(o),n.apply(this,[null,...a])}}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth(e=>{this.packet({type:p.CONNECT,data:e})}):this.packet({type:p.CONNECT,data:this.auth})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case p.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case p.EVENT:case p.BINARY_EVENT:this.onevent(e);break;case p.ACK:case p.BINARY_ACK:this.onack(e);break;case p.DISCONNECT:this.ondisconnect();break;case p.CONNECT_ERROR:this.destroy();const s=new Error(e.data.message);s.data=e.data.data,this.emitReserved("connect_error",s)}}onevent(e){const n=e.data||[];null!=e.id&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const s of n)s.apply(this,e)}super.emit.apply(this,e)}ack(e){const n=this;let s=!1;return function(...o){s||(s=!0,n.packet({type:p.ACK,id:e,data:o}))}}onack(e){const n=this.acks[e.id];"function"==typeof n&&(n.apply(this,e.data),delete this.acks[e.id])}onconnect(e){this.id=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:p.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let s=0;s<n.length;s++)if(e===n[s])return n.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let s=0;s<n.length;s++)if(e===n[s])return n.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const s of n)s.apply(this,e.data)}}}function R(i){this.ms=(i=i||{}).min||100,this.max=i.max||1e4,this.factor=i.factor||2,this.jitter=i.jitter>0&&i.jitter<=1?i.jitter:0,this.attempts=0}R.prototype.duration=function(){var i=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*i);i=0==(1&Math.floor(10*e))?i-n:i+n}return 0|Math.min(i,this.max)},R.prototype.reset=function(){this.attempts=0},R.prototype.setMin=function(i){this.ms=i},R.prototype.setMax=function(i){this.max=i},R.prototype.setJitter=function(i){this.jitter=i};class W extends _{constructor(e,n){var s;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(n=e,e=void 0),(n=n||{}).path=n.path||"/socket.io",this.opts=n,Y(this,n),this.reconnection(!1!==n.reconnection),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(s=n.randomizationFactor)&&void 0!==s?s:.5),this.backoff=new R({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==n.timeout?2e4:n.timeout),this._readyState="closed",this.uri=e;const o=n.parser||C;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=!1!==n.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(n=this.backoff)||void 0===n||n.setMin(e),this)}randomizationFactor(e){var n;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(n=this.backoff)||void 0===n||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(n=this.backoff)||void 0===n||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Ot(this.uri,this.opts);const n=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const o=M(n,"open",function(){s.onopen(),e&&e()}),a=M(n,"error",l=>{s.cleanup(),s._readyState="closed",this.emitReserved("error",l),e?e(l):s.maybeReconnectOnOpen()});if(!1!==this._timeout){const l=this._timeout;0===l&&o();const g=this.setTimeoutFn(()=>{o(),n.close(),n.emit("error",new Error("timeout"))},l);this.opts.autoUnref&&g.unref(),this.subs.push(function(){clearTimeout(g)})}return this.subs.push(o),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(M(e,"ping",this.onping.bind(this)),M(e,"data",this.ondata.bind(this)),M(e,"error",this.onerror.bind(this)),M(e,"close",this.onclose.bind(this)),M(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){this.decoder.add(e)}ondecoded(e){this.emitReserved("packet",e)}onerror(e){this.emitReserved("error",e)}socket(e,n){let s=this.nsps[e];return s||(s=new ct(this,e,n),this.nsps[e]=s),s}_destroy(e){const n=Object.keys(this.nsps);for(const s of n)if(this.nsps[s].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let s=0;s<n.length;s++)this.engine.write(n[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,n){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(o=>{o?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",o)):e.onreconnect()}))},n);this.opts.autoUnref&&s.unref(),this.subs.push(function(){clearTimeout(s)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const q={};function Z(i,e){"object"==typeof i&&(e=i,i=void 0);const n=function Qt(i,e="",n){let s=i;n=n||"undefined"!=typeof location&&location,null==i&&(i=n.protocol+"//"+n.host),"string"==typeof i&&("/"===i.charAt(0)&&(i="/"===i.charAt(1)?n.protocol+i:n.host+i),/^(https?|wss?):\/\//.test(i)||(i=void 0!==n?n.protocol+"//"+i:"https://"+i),s=st(i)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const a=-1!==s.host.indexOf(":")?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+a+":"+s.port+e,s.href=s.protocol+"://"+a+(n&&n.port===s.port?"":":"+s.port),s}(i,(e=e||{}).path||"/socket.io"),s=n.source,o=n.id;let P;return e.forceNew||e["force new connection"]||!1===e.multiplex||q[o]&&n.path in q[o].nsps?P=new W(s,e):(q[o]||(q[o]=new W(s,e)),P=q[o]),n.query&&!e.query&&(e.query=n.queryKey),P.socket(n.path,e)}Object.assign(Z,{Manager:W,Socket:ct,io:Z,connect:Z});new d.OlP("__SOCKET_IO_CONFIG__");var wt=c(2340),se=c(263);let r=(()=>{class i extends class ne{constructor(e){this.config=e,this.subscribersCounter={},this.eventObservables$={},this.emptyConfig={url:"",options:{}},void 0===e&&(e=this.emptyConfig),this.ioSocket=(Z||u)(e.url,e.options)}of(e){this.ioSocket.of(e)}on(e,n){this.ioSocket.on(e,n)}once(e,n){this.ioSocket.once(e,n)}connect(){return this.ioSocket.connect()}disconnect(e){return this.ioSocket.disconnect.apply(this.ioSocket,arguments)}emit(e,...n){return this.ioSocket.emit.apply(this.ioSocket,arguments)}removeListener(e,n){return this.ioSocket.removeListener.apply(this.ioSocket,arguments)}removeAllListeners(e){return this.ioSocket.removeAllListeners.apply(this.ioSocket,arguments)}fromEvent(e){return this.subscribersCounter[e]||(this.subscribersCounter[e]=0),this.subscribersCounter[e]++,this.eventObservables$[e]||(this.eventObservables$[e]=new t.y(n=>{const s=o=>{n.next(o)};return this.ioSocket.on(e,s),()=>{this.subscribersCounter[e]--,0===this.subscribersCounter[e]&&(this.ioSocket.removeListener(e,s),delete this.eventObservables$[e])}}).pipe((0,x.B)())),this.eventObservables$[e]}fromOneTimeEvent(e){return new Promise(n=>this.once(e,n))}}{constructor(n){super({url:wt.N.socket_url,options:{query:{userId:JSON.parse(localStorage.getItem("auth")).user._id}}}),this.authService=n,this.url=`${wt.N.url_api}`,this.socket=this.ioSocket,this.users=this.listen("connected"),this.message=this.listen("message"),this.socket=this.ioSocket,this.getSocketId()}registerUser(n){console.log("Tu socket:",n)}getSocketId(){this.listen("connected").subscribe(n=>{localStorage.setItem("socketId",n)}),this.listen("disconnect").subscribe(n=>{localStorage.removeItem("socketId")})}listen(n){const s=new d.vpe;return this.socket.on(n,o=>s.emit(o)),s}emit(n,s){this.socket.emit(n,s)}}return i.\u0275fac=function(n){return new(n||i)(d.LFG(se.e))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},5682:(ht,k,c)=>{c.r(k),c.d(k,{MainModule:()=>se});var C=c(9808),u=c(3075),d=c(9291),t=c(5e3);let x=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-home"]],decls:1,vars:0,consts:[["src","assets/images/logo-home.png","alt","Logo de senntmessages"]],template:function(e,n){1&e&&t._UZ(0,"img",0)},styles:["[_nghost-%COMP%]{background:rgba(68,188,255,.12);display:none;height:100vh;width:100%}img[_ngcontent-%COMP%]{max-width:100%;margin:0 auto;display:block;position:relative;top:50%;transform:translateY(-50%)}@media (min-width: 1024px){[_nghost-%COMP%]{display:block}}"]}),r})();var v=c(5861),b=c(7579),A=c(9300),y=c(2340),w=c(9233),h=c(3716),f=c(4450),m=c(8187),U=c(2349),O=c(5245),S=c(7423);function ie(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.answer(!0))}),t.TgZ(1,"mat-icon"),t._uU(2,"call"),t.qZA()()}}function Tt(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"div",2),t._UZ(1,"img",3),t.TgZ(2,"div",4)(3,"p",5),t._uU(4),t.qZA(),t.TgZ(5,"p",6),t._uU(6),t.qZA()(),t.TgZ(7,"div",7)(8,"button",8),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.answer(!1))}),t.TgZ(9,"mat-icon"),t._uU(10,"call_end"),t.qZA()(),t.YNc(11,ie,3,0,"button",9),t.qZA()()}if(2&r){const e=t.oxw(),n=t.MAs(2);t.xp6(1),t.Q6J("src",e.data.from.image.url,t.LSH),t.xp6(3),t.Oqu(e.data.from.name),t.xp6(2),t.hij("~ ",e.data.from.username,""),t.xp6(5),t.Q6J("ngIf","voice"==e.data.type)("ngIfElse",n)}}function kt(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.answer(!0))}),t.TgZ(1,"mat-icon"),t._uU(2,"videocam"),t.qZA()()}}let At=(()=>{class r{constructor(e,n){this.dialogRef=e,this.modalData=n}ngOnInit(){this.data=this.modalData}answer(e){var n=this;return(0,v.Z)(function*(){yield n.dialogRef.close({answer:e})})()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(U.so),t.Y36(U.WI))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-incoming-call"]],decls:3,vars:1,consts:[["class","contain",4,"ngIf"],["video",""],[1,"contain"],["alt","imagen de usuario",3,"src"],[1,"text"],[1,"name"],[1,"username"],[1,"buttons"],["mat-fab","","color","primary",1,"btn_colgar",3,"click"],["mat-fab","","color","primary","class","btn_answer animate__animated animate__bounce animate__infinite",3,"click",4,"ngIf","ngIfElse"],["mat-fab","","color","primary",1,"btn_answer","animate__animated","animate__bounce","animate__infinite",3,"click"]],template:function(e,n){1&e&&(t.YNc(0,Tt,12,5,"div",0),t.YNc(1,kt,3,0,"ng-template",null,1,t.W1O)),2&e&&t.Q6J("ngIf",n.data)},dependencies:[C.O5,O.Hw,S.lW],styles:[".contain[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;background:#3fbf1f}.contain[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px;height:200px;object-fit:cover;border-radius:50%;box-shadow:0 0 6px #ccc;margin-bottom:10px}.contain[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.contain[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:30px;margin:10px 0!important}.contain[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{font-size:20px;margin:0 0 10px!important}.contain[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 20px}.contain[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .btn_colgar[_ngcontent-%COMP%]{background:#ef0505}.contain[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .btn_answer[_ngcontent-%COMP%]{background:#198f19}"]}),r})();var L=c(263),B=c(3175),ut=c(273),J=c(5620),N=c(2525),tt=c(3251),F=c(4118);const _={af:"Afrikaans",sq:"Albanian",ar:"Arabic",hy:"Armenian",az:"Azerbaijani",bn:"Bengali",bs:"Bosnian",bg:"Bulgarian",ca:"Catalan",ceb:"Cebuano",ny:"Chichewa","zh-CN":"Chinese Simplified","zh-TW":"Chinese Traditional",co:"Corsican",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch",en:"English",eo:"Esperanto",et:"Estonian",tl:"Filipino",fi:"Finnish",fr:"French",fy:"Frisian",gl:"Galician",ka:"Georgian",de:"German",el:"Greek",gu:"Gujarati",ht:"Haitian Creole",ha:"Hausa",haw:"Hawaiian",iw:"Hebrew",hi:"Hindi",hmn:"Hmong",hu:"Hungarian",is:"Icelandic",ig:"Igbo",id:"Indonesian",ga:"Irish",it:"Italian",ja:"Japanese",jw:"Javanese",kn:"Kannada",kk:"Kazakh",km:"Khmer",ko:"Korean",ku:"Kurdish (Kurmanji)",ky:"Kyrgyz",lo:"Lao",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"Macedonian",mg:"Malagasy",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mn:"Mongolian",my:"Myanmar (Burmese)",ne:"Nepali",no:"Norwegian",ps:"Pashto",fa:"Persian",pl:"Polish",pt:"Portuguese",ro:"Romanian",ru:"Russian",sm:"Samoan",gd:"Scots Gaelic",sr:"Serbian",st:"Sesotho",sn:"Shona",sd:"Sindhi",si:"Sinhala",sk:"Slovak",sl:"Slovenian",es:"Spanish",su:"Sudanese",sw:"Swahili",sv:"Swedish",tg:"Tajik",ta:"Tamil",te:"Telugu",th:"Thai",tr:"Turkish",uz:"Uzbek",vi:"Vietnamese",cy:"Welsh",xh:"Xhosa",yi:"Yiddish",yo:"Yoruba",zu:"Zulu"};var T=c(8372),D=c(8386),St=c(2368),Et=c(1054);function Y(r,i){if(1&r&&(t.TgZ(0,"div",10)(1,"a",11),t.ALo(2,"location"),t._uU(3,"Shared location"),t.qZA()()),2&r){const e=t.oxw();t.xp6(1),t.s9C("href",t.lcZ(2,1,e.shareData),t.LSH)}}let Zt=(()=>{class r{constructor(e,n){var s,o;this.userService=e,this.authService=n,this.eventOpenAlert=new b.x,this.inputSearch=new u.NI,this.active=!1,this.share=!1,this.shareData=null;try{this.langActive=JSON.parse(localStorage.getItem("language")).lang}catch(a){localStorage.removeItem("language")}this.active=!!this.langActive,this.langs=Object.entries(_),this.user=this.authService.getMyUser(),null!==(o=null===(s=this.user)||void 0===s?void 0:s.location)&&void 0!==o&&o.latitud&&(this.share=!0,this.shareData=this.user.location)}ngOnInit(){}close(){const e=document.getElementById("div_settings");e.classList.add("animate__slideOutLeft"),setTimeout(()=>{e.style.display="none",e.classList.remove("animate__slideOutLeft")},500)}loading(e=!0){const n=document.getElementById("loading");e?n.style.display="block":setTimeout(()=>{n.style.display="none"},1e3)}cleanSearch(){document.getElementById("inputSearch").focus(),this.inputSearch.setValue("")}search(e=!0){e?this.searchSubscription=this.inputSearch.valueChanges.pipe((0,T.b)(100)).subscribe(n=>{if(n){const s=this.langs.filter(o=>{const a=n.toLowerCase();return!!o[1].toLowerCase().includes(a)&&o});this.langs=s}else this.langs=Object.entries(_)}):this.searchSubscription.unsubscribe()}selectLang(e){localStorage.setItem("language",JSON.stringify({lang:e[1],abr:e[0]})),this.langActive=e[1],(0,m.O1)(this.eventOpenAlert,`Messages language updated to ${e[1]} successfully`)}toggleActive(e){this.active=e.checked,this.active?this.selectLang(["en","English"]):localStorage.removeItem("language")}toggleShare(e){this.share=e.checked,this.share?((0,m.O1)(this.eventOpenAlert,"Getting and sending location"),this.userService.getPosition().then(n=>{this.userService.updateLocation({longitud:n.coords.longitude,latitud:n.coords.latitude}).subscribe(o=>{(0,m.M6)(this.eventOpenAlert),this.shareData=o.location,this.authService.updateAuthUser(o)})}).catch(n=>(0,m.O1)(this.eventOpenAlert,"Unable to record audio. Give microphone permission and try again"))):(this.shareData=null,(0,m.O1)(this.eventOpenAlert,"Removing location"),this.userService.deleteLocation().subscribe(n=>{console.log(n),(0,m.M6)(this.eventOpenAlert),this.shareData=null,this.authService.updateAuthUser(n)}))}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(D.K),t.Y36(L.e))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-settings"]],decls:15,vars:3,consts:[[1,"container"],[1,"header"],[1,"back",3,"click"],[1,"main"],["id","options_settings"],[1,"share_location"],[1,"text"],[3,"checked","change"],["class","data",4,"ngIf"],[3,"eventOpenAlert"],[1,"data"],["mat-raised-button","","target","_blank",3,"href"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-icon",2),t.NdJ("click",function(){return n.close()}),t._uU(3,"arrow_back"),t.qZA(),t.TgZ(4,"p"),t._uU(5,"Select messages language"),t.qZA()(),t.TgZ(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",6)(10,"h3"),t._uU(11,"Share location"),t.qZA(),t.TgZ(12,"mat-slide-toggle",7),t.NdJ("change",function(o){return n.toggleShare(o)}),t.qZA()(),t.YNc(13,Y,4,3,"div",8),t.qZA()(),t._UZ(14,"app-mini-alert",9),t.qZA()()),2&e&&(t.xp6(12),t.Q6J("checked",n.share),t.xp6(1),t.Q6J("ngIf",null==n.shareData?null:n.shareData.latitud),t.xp6(1),t.Q6J("eventOpenAlert",n.eventOpenAlert.asObservable()))},dependencies:[C.O5,O.Hw,S.zs,St.Rr,F.O,Et.p],styles:["[_ngcontent-%COMP%]:root{--animate-delay: 0s}.animate__delay-2s[_ngcontent-%COMP%]{animation-delay:.2s!important}[_nghost-%COMP%]{display:none;position:absolute;top:0;z-index:100;height:100%;width:100%;background:#fff}.container[_ngcontent-%COMP%]{height:100%}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background:#11101d;background:#446678;background:black;height:110px;height:100px;display:flex;align-items:end;padding:20px 10px 18px 15px;color:#fff}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px;padding:0 15px 3px 13px}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer;border-radius:50px;width:30px;height:30px;display:flex;align-items:center;justify-content:center}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{background:#07070d}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{height:calc(100% - 120px);width:100%;overflow-y:auto;overflow-x:hidden;padding-bottom:25px}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]::-webkit-scrollbar{width:3px}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#2e2b4e}.container[_ngcontent-%COMP%]   .lang[_ngcontent-%COMP%]{color:#000;padding:20px 40px;font-size:19px;cursor:pointer;border-top:1px solid rgba(72,4,129,.0784313725)}.container[_ngcontent-%COMP%]   .lang[_ngcontent-%COMP%]:hover{background:#f0f8ff}.container[_ngcontent-%COMP%]   .lang[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}.container[_ngcontent-%COMP%]   .lang.notTranslate[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.search[_ngcontent-%COMP%]{display:flex;justify-content:center;position:relative;border-bottom:1px solid #efefef;position:sticky;top:0;background:#fff;padding-top:10px;z-index:100}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;outline:none;width:94%;margin:10px auto;background:rgba(68,188,255,.3490196078);padding:10px 30px 10px 42px;border-radius:50px;color:#686868}.search[_ngcontent-%COMP%]   mat-icon.search-icon[_ngcontent-%COMP%]{position:absolute;left:5.2%;top:28px;color:#919191}.search[_ngcontent-%COMP%]   #clean-search[_ngcontent-%COMP%]{width:20px!important;height:20px!important;color:#919191;cursor:pointer;position:absolute;right:7%;top:27px}.alert[_ngcontent-%COMP%]{font-size:13px;color:red;width:-moz-fit-content;width:fit-content;margin-bottom:3px}.alert.error[_ngcontent-%COMP%]{color:red}.alert.ok[_ngcontent-%COMP%]{color:#22a522}#options_settings[_ngcontent-%COMP%]{color:#000;position:sticky;top:0;background:#fff;z-index:300}#options_settings[_ngcontent-%COMP%]   .share_location[_ngcontent-%COMP%]{padding:20px 45px 0}#options_settings[_ngcontent-%COMP%]   .share_location[_ngcontent-%COMP%]:hover{background:#f0f8ff}#options_settings[_ngcontent-%COMP%]   .share_location[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:baseline}#options_settings[_ngcontent-%COMP%]   .share_location[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px}#options_settings[_ngcontent-%COMP%]   .share_location[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{padding-bottom:25px}"]}),r})();var It=c(7544),et=c(773);let Ut=(()=>{class r{transform(e){let n=e;if(e){const s=new Date,o=new Date(Date.parse(e)),a=`${o.getDate()}/${H(o.getMonth())}/${o.getFullYear()}`;let l=new Date;l=`${l.getDate()}/${H(l.getMonth())}/${l.getFullYear()}`;let g=new Date(s.getTime()-864e5);g=`${g.getDate()}/${H(g.getMonth())}/${g.getFullYear()}`;let P=new Date(s.getTime()-6048e5);if(a===l){let I=o.getMinutes();I<10&&(I=`0${I}`),n=`${o.getHours()}:${I}`}else n=a===g?"Yesterday":o.getTime()>P.getTime()&&o.getTime()<s.getTime()&&o.getDay()!==s.getDay()?function pt(r){switch(r){case 1:default:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday";case 0:return"Sunday"}}(o.getDay()):a}return n}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275pipe=t.Yjl({name:"createDate",type:r,pure:!0}),r})();function H(r){switch(r){case 0:default:return"01";case 1:return"02";case 2:return"03";case 3:return"04";case 4:return"05";case 5:return"06";case 6:return"07";case 7:return"08";case 8:return"09";case 9:return"10";case 10:return"11";case 11:return"12"}}function K(r,i){1&r&&(t.TgZ(0,"p",5),t._uU(1,"No chats found "),t._UZ(2,"br"),t._uU(3," Start one!"),t.qZA())}const dt=function(r){return{read:r}};function gt(r,i){if(1&r&&(t.TgZ(0,"mat-icon",17),t._uU(1,"done_all"),t.qZA()),2&r){const e=t.oxw().$implicit;t.Q6J("ngClass",t.VKq(1,dt,null==e.lastMessage?null:e.lastMessage.read))}}function E(r,i){1&r&&(t.TgZ(0,"mat-icon"),t._uU(1,"photo_camera"),t.qZA())}function ft(r,i){1&r&&(t.TgZ(0,"mat-icon"),t._uU(1,"insert_drive_file"),t.qZA())}function mt(r,i){1&r&&(t.TgZ(0,"mat-icon"),t._uU(1,"keyboard_voice"),t.qZA())}function re(r,i){1&r&&(t.TgZ(0,"mat-icon"),t._uU(1,"location_on"),t.qZA())}function _t(r,i){if(1&r&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.Oqu((null==e.lastMessage?null:e.lastMessage.message)||"~~")}}function Ct(r,i){if(1&r&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.Oqu((null==e.lastMessage?null:e.lastMessage.message.trim())||"Photo")}}function Nt(r,i){if(1&r&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.Oqu((null==e.lastMessage?null:e.lastMessage.doc.name)||"Document")}}function vt(r,i){if(1&r&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.Oqu((null==e.lastMessage||null==e.lastMessage.doc?null:e.lastMessage.doc.time)||"Audio")}}function Rt(r,i){1&r&&(t.TgZ(0,"p"),t._uU(1,"Location"),t.qZA())}function yt(r,i){if(1&r&&(t.TgZ(0,"p"),t._UZ(1,"span",18),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("matBadge",e.noRead)}}function Lt(r,i){if(1&r&&(t.TgZ(0,"div",7),t._UZ(1,"img",8),t.TgZ(2,"div",9)(3,"div",10)(4,"p",11),t._uU(5),t.qZA(),t.TgZ(6,"p",12),t._uU(7),t.ALo(8,"createDate"),t.qZA()(),t.TgZ(9,"div",13)(10,"div",14),t.YNc(11,gt,2,3,"mat-icon",15),t.YNc(12,E,2,0,"mat-icon",16),t.YNc(13,ft,2,0,"mat-icon",16),t.YNc(14,mt,2,0,"mat-icon",16),t.YNc(15,re,2,0,"mat-icon",16),t.YNc(16,_t,2,1,"p",16),t.YNc(17,Ct,2,1,"p",16),t.YNc(18,Nt,2,1,"p",16),t.YNc(19,vt,2,1,"p",16),t.YNc(20,Rt,2,0,"p",16),t.qZA(),t.YNc(21,yt,2,1,"p",16),t.qZA()()()),2&r){const e=i.$implicit,n=t.oxw(3);t.MGl("routerLink","/chat/",e._id,""),t.xp6(1),t.Q6J("src",n.getUser(e.users).image.url,t.LSH)("alt",n.user.name),t.xp6(4),t.Oqu(n.getUser(e.users).name),t.xp6(2),t.Oqu(t.lcZ(8,16,(null==e.lastMessage?null:e.lastMessage.createdAt)||e.updatedAt)),t.xp6(4),t.Q6J("ngIf",(null==e.lastMessage?null:e.lastMessage.from)===n.user._id),t.xp6(1),t.Q6J("ngIf",null==e.lastMessage?null:e.lastMessage.image),t.xp6(1),t.Q6J("ngIf",(null==e.lastMessage?null:e.lastMessage.doc)&&"audio"!=(null==e||null==e.lastMessage||null==e.lastMessage.doc?null:e.lastMessage.doc.mimetype.split("/")[0])),t.xp6(1),t.Q6J("ngIf",(null==e.lastMessage?null:e.lastMessage.doc)&&"audio"==(null==e||null==e.lastMessage||null==e.lastMessage.doc?null:e.lastMessage.doc.mimetype.split("/")[0])),t.xp6(1),t.Q6J("ngIf",null==e.lastMessage?null:e.lastMessage.location),t.xp6(1),t.Q6J("ngIf",!(null!=e.lastMessage&&e.lastMessage.image)),t.xp6(1),t.Q6J("ngIf",null==e.lastMessage?null:e.lastMessage.image),t.xp6(1),t.Q6J("ngIf",(null==e.lastMessage?null:e.lastMessage.doc)&&"audio"!=(null==e.lastMessage||null==e.lastMessage.doc?null:e.lastMessage.doc.mimetype.split("/")[0])),t.xp6(1),t.Q6J("ngIf",(null==e.lastMessage?null:e.lastMessage.doc)&&"audio"==(null==e.lastMessage||null==e.lastMessage.doc?null:e.lastMessage.doc.mimetype.split("/")[0])),t.xp6(1),t.Q6J("ngIf",null==e.lastMessage?null:e.lastMessage.location),t.xp6(1),t.Q6J("ngIf",e.noRead&&e.noRead>0)}}function qt(r,i){if(1&r&&t.YNc(0,Lt,22,18,"div",6),2&r){const e=t.oxw(2);t.Q6J("ngForOf",e.chats)}}function Bt(r,i){if(1&r&&(t.TgZ(0,"div",2),t.YNc(1,K,4,0,"p",3),t.YNc(2,qt,1,1,"ng-template",null,4,t.W1O),t.qZA()),2&r){const e=t.MAs(3),n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.chats.length<1)("ngIfElse",e)}}function Q(r,i){1&r&&t._UZ(0,"mat-spinner",19)}let bt=(()=>{class r{constructor(e,n,s){this.authService=e,this.chatService=n,this.store=s}ngOnInit(){this.user=this.authService.getMyUser(),this.updateChats.subscribe(e=>{this.user=this.authService.getMyUser(),this.getChats()}),this.getChats(),this.subcribeChats()}getUser(e){return e.find(n=>n._id!=this.user._id)}getChats(){this.chatService.getAllChats().subscribe(e=>{this.store.dispatch(new f.vh(e))})}subcribeChats(){this.store.select("chats").subscribe(e=>{this.chats=this.chatService.sortChats([...e])})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(L.e),t.Y36(B.a),t.Y36(J.yh))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-chats"]],inputs:{updateChats:"updateChats"},decls:3,vars:2,consts:[["class","chats",4,"ngIf","ngIfElse"],["loading",""],[1,"chats"],["class","textNoFound",4,"ngIf","ngIfElse"],["chatsContainer",""],[1,"textNoFound"],["routerLinkActive","active","class","chat",3,"routerLink",4,"ngFor","ngForOf"],["routerLinkActive","active",1,"chat",3,"routerLink"],[3,"src","alt"],[1,"chat__info"],[1,"user"],[1,"user__name"],[1,"chat__info__time"],[1,"chat__div-message"],[1,"chat__info__message"],["class","icon-done",3,"ngClass",4,"ngIf"],[4,"ngIf"],[1,"icon-done",3,"ngClass"],["matBadgeOverlap","false",3,"matBadge"],["id","loading",1,"spinner-chat"]],template:function(e,n){if(1&e&&(t.YNc(0,Bt,4,2,"div",0),t.YNc(1,Q,1,0,"ng-template",null,1,t.W1O)),2&e){const s=t.MAs(2);t.Q6J("ngIf",n.chats)("ngIfElse",s)}},dependencies:[C.mk,C.sg,C.O5,d.rH,d.Od,O.Hw,It.k,et.Ou,Ut],styles:[".chat[_ngcontent-%COMP%]{cursor:pointer;display:flex;justify-content:space-between;align-items:center;padding:11px 20px 11px 14px}.chat[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:47px;height:47px;border-radius:50px;object-fit:cover;margin-right:10px}.chat__info[_ngcontent-%COMP%]{border-bottom:1px solid #efefef;padding-bottom:5px;padding-top:6.5px;width:100%;height:55px}.chat__info__time[_ngcontent-%COMP%]{color:#446678;font-size:12px}.chat__info__message[_ngcontent-%COMP%]{color:#535353;font-size:16px;display:flex;align-items:center;white-space:nowrap;margin-right:5px!important;overflow:hidden;border-bottom:none}.chat__info__message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:inline;text-overflow:ellipsis;overflow:hidden}.chat__info__message[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{transform:scale(.7)}.chat__info__message[_ngcontent-%COMP%]   .read[_ngcontent-%COMP%]{color:#009ef7}.chat__div-message[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 22px;align-items:center;height:28px}.chat[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{max-width:18px;max-height:18px}.chat[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;align-items:center}.chat[_ngcontent-%COMP%]   .user__name[_ngcontent-%COMP%]{font-size:20px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-right:10px!important;color:#000!important}.chat[_ngcontent-%COMP%]:hover{background:#f9f9f9}.chat.active[_ngcontent-%COMP%]{background:#f0f0f0}.textNoFound[_ngcontent-%COMP%]{text-align:center;font-size:17px;margin-top:30px!important;color:#8a8a8a}"]}),r})();function Jt(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"mat-icon",8),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.cleanSearch())}),t._uU(1,"close"),t.qZA()}}function z(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"div",10),t.NdJ("click",function(){const o=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.createChat(o._id,o.chatId))}),t._UZ(1,"img",11),t.TgZ(2,"div",12)(3,"div",13)(4,"p",14),t._uU(5),t.qZA(),t.TgZ(6,"p",15),t._uU(7),t.qZA()(),t.TgZ(8,"mat-icon"),t._uU(9,"comment"),t.qZA()()()}if(2&r){const e=i.$implicit;t.xp6(1),t.Q6J("src",e.image.url,t.LSH)("alt",e.name),t.xp6(4),t.Oqu(e.name),t.xp6(2),t.Oqu(e.username)}}function nt(r,i){if(1&r&&(t.TgZ(0,"div"),t.YNc(1,z,10,4,"div",9),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.users)}}function Ft(r,i){1&r&&(t.TgZ(0,"p",16),t._uU(1,"No users found."),t.qZA())}let xt=(()=>{class r{constructor(e,n,s,o){this.userService=e,this.chatService=n,this.authService=s,this.router=o,this.chatsUpdated=new t.vpe,this.inputSearch=new u.NI}ngOnInit(){this.getUsers(),this.update.subscribe(e=>{this.getUsers()})}getUsers(){this.userService.getAll().subscribe(e=>{this.users=e,this.allUsers=e})}createChat(e,n){n?this.router.navigate([`/chat/${n}`]):(this.loading(),this.chatService.getChatId(e).subscribe(s=>{this.users.find(o=>o._id==e).chatId=s._id,this.chatsUpdated.emit(),this.router.navigate([`/chat/${s._id}`]),this.loading(!1)}))}loading(e=!0){const n=document.getElementById("loading");e?n.style.display="block":setTimeout(()=>{n.style.display="none"},1e3)}cleanSearch(){document.getElementById("inputSearch").focus(),this.inputSearch.setValue("")}search(e=!0){e?this.searchSubscription=this.inputSearch.valueChanges.pipe((0,T.b)(100)).subscribe(n=>{const s=this.allUsers.filter(o=>{const a=o.name.toUpperCase(),l=o.username.toUpperCase(),g=n.toUpperCase();return!(!a.includes(g)&&!l.includes(g))&&o});this.users=s}):this.searchSubscription.unsubscribe()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(D.K),t.Y36(B.a),t.Y36(L.e),t.Y36(d.F0))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-users"]],inputs:{update:["updateUsers","update"]},outputs:{chatsUpdated:"chatsUpdated"},decls:10,vars:4,consts:[[1,"users"],[1,"search"],["type","text","id","inputSearch","placeholder","Search users by name and username","autocomplete","off",3,"formControl","focus","blur"],[1,"search-icon"],["id","loading",1,"spinner-users"],["id","clean-search",3,"click",4,"ngIf"],[4,"ngIf","ngIfElse"],["noFound",""],["id","clean-search",3,"click"],["class","user",3,"click",4,"ngFor","ngForOf"],[1,"user",3,"click"],[3,"src","alt"],[1,"data"],[1,"data__text"],[1,"name"],[1,"username"],[1,"textNoFound"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"input",2),t.NdJ("focus",function(){return n.search()})("blur",function(){return n.search(!1)}),t.qZA(),t.TgZ(3,"mat-icon",3),t._uU(4,"search"),t.qZA(),t._UZ(5,"mat-spinner",4),t.YNc(6,Jt,2,0,"mat-icon",5),t.qZA(),t.YNc(7,nt,2,1,"div",6),t.YNc(8,Ft,2,0,"ng-template",null,7,t.W1O),t.qZA()),2&e){const s=t.MAs(9);t.xp6(2),t.Q6J("formControl",n.inputSearch),t.xp6(4),t.Q6J("ngIf",n.inputSearch.value),t.xp6(1),t.Q6J("ngIf",(null==n.users?null:n.users.length)>0)("ngIfElse",s)}},dependencies:[C.sg,C.O5,O.Hw,et.Ou,u.Fj,u.JJ,u.oH],styles:[".users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{cursor:pointer;display:grid;padding:10px 20px;grid-template-columns:auto 1fr}.users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50px;object-fit:cover;margin-right:10px}.users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 24px;align-items:center;border-bottom:1px solid #efefef;padding-bottom:5px;padding-top:3px}.users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .data__text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-right:11px}.users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .data__text[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:18px;color:#000}.users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .data__text[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{font-size:14px;color:#446678}.users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .data__text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;margin-right:4px!important}.users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#446678}.users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]:hover{background:#f7f7f7}.users[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{display:flex;justify-content:center;position:relative;border-bottom:1px solid #efefef;position:sticky;top:0;background:#fff}.users[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;outline:none;width:94%;margin:10px auto;background:rgba(68,188,255,.3490196078);padding:10px 30px 10px 42px;border-radius:50px;color:#686868}.users[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   mat-icon.search-icon[_ngcontent-%COMP%]{position:absolute;left:5.2%;top:19px;color:#919191}.users[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   #clean-search[_ngcontent-%COMP%]{width:20px!important;height:20px!important;color:#919191;cursor:pointer;position:absolute;right:7%;top:16px}.textNoFound[_ngcontent-%COMP%]{text-align:center;font-size:17px;margin-top:30px!important;color:#8a8a8a}@media (min-width: 400px){.users[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   #clean-search[_ngcontent-%COMP%]{right:6%}}@media (min-width: 600px){.users[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   #clean-search[_ngcontent-%COMP%]{right:5%}}@media (min-width: 1024px){.users[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   #clean-search[_ngcontent-%COMP%]{right:6.5%}}"]}),r})();var $=c(2933),G=c(7322),Dt=c(7531);function Yt(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"mat-icon",32),t.NdJ("click",function(){t.CHM(e),t.oxw();const s=t.MAs(32),o=t.oxw();return t.KtG(o.toggleEdit(s))}),t._uU(1,"edit"),t.qZA()}}function st(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"mat-icon",33),t.NdJ("click",function(){t.CHM(e),t.oxw();const s=t.MAs(32),o=t.oxw();return t.KtG(o.toggleEdit(s,!0))}),t._uU(1,"close"),t.qZA()}}function Ht(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"mat-icon",34),t.NdJ("click",function(){t.CHM(e),t.oxw();const s=t.MAs(32),o=t.oxw();return t.KtG(o.save(s))}),t._uU(1,"check"),t.qZA()}}function Kt(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Must have at least 3 letters "),t.qZA())}function Ot(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Name is required "),t.qZA())}function ae(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"mat-icon",32),t.NdJ("click",function(){t.CHM(e),t.oxw();const s=t.MAs(43),o=t.oxw();return t.KtG(o.toggleEdit(s))}),t._uU(1,"edit"),t.qZA()}}function Qt(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"mat-icon",33),t.NdJ("click",function(){t.CHM(e),t.oxw();const s=t.MAs(43),o=t.oxw();return t.KtG(o.toggleEdit(s,!0))}),t._uU(1,"close"),t.qZA()}}function zt(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"mat-icon",34),t.NdJ("click",function(){t.CHM(e),t.oxw();const s=t.MAs(43),o=t.oxw();return t.KtG(o.save(s))}),t._uU(1,"check"),t.qZA()}}function $t(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Must have at least 3 letters "),t.qZA())}function Mt(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Username is required "),t.qZA())}function Gt(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Username is already in use "),t.qZA())}function Vt(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"mat-icon",32),t.NdJ("click",function(){t.CHM(e),t.oxw();const s=t.MAs(55),o=t.oxw();return t.KtG(o.toggleEdit(s))}),t._uU(1,"edit"),t.qZA()}}function it(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"mat-icon",33),t.NdJ("click",function(){t.CHM(e),t.oxw();const s=t.MAs(55),o=t.oxw();return t.KtG(o.toggleEdit(s,!0))}),t._uU(1,"close"),t.qZA()}}function V(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"mat-icon",34),t.NdJ("click",function(){t.CHM(e),t.oxw();const s=t.MAs(55),o=t.oxw();return t.KtG(o.save(s))}),t._uU(1,"check"),t.qZA()}}function Wt(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Please enter a valid email address "),t.qZA())}function ot(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Email is already in use "),t.qZA())}function jt(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Email is required "),t.qZA())}function rt(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Please enter a valid email address "),t.qZA())}function Pt(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.toggleChangePassword())}),t._uU(1,"Change password"),t.qZA()}}function p(r,i){1&r&&(t.TgZ(0,"p",36),t._uU(1,"Password updated successfully"),t.qZA())}function Xt(r,i){1&r&&t._UZ(0,"mat-spinner",47)}function at(r,i){1&r&&(t.TgZ(0,"p",48),t._uU(1,"The current password is incorrect"),t.qZA())}function te(r,i){1&r&&(t.TgZ(0,"p",48),t._uU(1,"All fields are required"),t.qZA())}function M(r,i){1&r&&(t.TgZ(0,"p",48),t._uU(1,"The new password must have at least 8 letters"),t.qZA())}function ee(r,i){1&r&&(t.TgZ(0,"p",48),t._uU(1,"Confirm password don't match"),t.qZA())}function ct(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"form",37),t.NdJ("ngSubmit",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.changePassword())}),t.TgZ(1,"div",38)(2,"p"),t._uU(3,"Change your password"),t.qZA(),t.YNc(4,Xt,1,0,"mat-spinner",39),t.qZA(),t.YNc(5,at,2,0,"p",40),t.YNc(6,te,2,0,"p",40),t.YNc(7,M,2,0,"p",40),t.YNc(8,ee,2,0,"p",40),t.TgZ(9,"mat-form-field")(10,"mat-label"),t._uU(11,"Actual password"),t.qZA(),t._UZ(12,"input",41),t.TgZ(13,"button",42),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.hide.one=!s.hide.one)}),t.TgZ(14,"mat-icon"),t._uU(15),t.qZA()()(),t.TgZ(16,"mat-form-field")(17,"mat-label"),t._uU(18,"New password"),t.qZA(),t._UZ(19,"input",43),t.TgZ(20,"button",42),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.hide.two=!s.hide.two)}),t.TgZ(21,"mat-icon"),t._uU(22),t.qZA()()(),t.TgZ(23,"mat-form-field")(24,"mat-label"),t._uU(25,"Confirm new password"),t.qZA(),t._UZ(26,"input",44),t.TgZ(27,"button",42),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.hide.three=!s.hide.three)}),t.TgZ(28,"mat-icon"),t._uU(29),t.qZA()()(),t.TgZ(30,"div",45)(31,"button",35),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.toggleChangePassword(!1))}),t._uU(32,"Cancel"),t.qZA(),t.TgZ(33,"button",46),t._uU(34,"Save"),t.qZA()()()}if(2&r){const e=t.oxw(2);t.Q6J("formGroup",e.formChangePassword),t.xp6(4),t.Q6J("ngIf",e.loadingChange),t.xp6(1),t.Q6J("ngIf",e.errChangedPassword),t.xp6(1),t.Q6J("ngIf",e.requiredChangePassword),t.xp6(1),t.Q6J("ngIf",e.minLength&&!e.requiredChangePassword),t.xp6(1),t.Q6J("ngIf",e.dontMatch&&!e.requiredChangePassword&&!e.minLength),t.xp6(4),t.Q6J("type",e.hide.one?"password":"text"),t.xp6(1),t.uIk("aria-label","Hide password")("aria-pressed",e.hide),t.xp6(2),t.Oqu(e.hide.one?"visibility_off":"visibility"),t.xp6(4),t.Q6J("type",e.hide.two?"password":"text"),t.xp6(1),t.uIk("aria-label","Hide password")("aria-pressed",e.hide),t.xp6(2),t.Oqu(e.hide.two?"visibility_off":"visibility"),t.xp6(4),t.Q6J("type",e.hide.three?"password":"text"),t.xp6(1),t.uIk("aria-label","Hide password")("aria-pressed",e.hide),t.xp6(2),t.Oqu(e.hide.three?"visibility_off":"visibility")}}function R(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"mat-icon",3),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.closeProfile())}),t._uU(3,"arrow_back"),t.qZA(),t.TgZ(4,"p"),t._uU(5,"Profile"),t.qZA()(),t.TgZ(6,"div",4)(7,"div",5)(8,"div",6),t._UZ(9,"img",7),t.qZA(),t.TgZ(10,"button",8)(11,"mat-icon"),t._uU(12,"linked_camera"),t.qZA()(),t.TgZ(13,"mat-menu",9,10)(15,"button",11),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.viewPhoto(s.user.image.url))}),t.TgZ(16,"span"),t._uU(17,"View photo"),t.qZA()(),t.TgZ(18,"button",11),t.NdJ("click",function(){t.CHM(e);const s=t.MAs(25),o=t.oxw();return t.KtG(o.uploadPhoto(s))}),t.TgZ(19,"span"),t._uU(20,"Upload photo"),t.qZA()(),t.TgZ(21,"button",11),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.removePhoto())}),t.TgZ(22,"span"),t._uU(23,"Remove photo"),t.qZA()()()(),t.TgZ(24,"input",12,13),t.NdJ("change",function(s){t.CHM(e);const o=t.oxw();return t.KtG(o.uploadPhoto(!1,s))}),t.qZA(),t.TgZ(26,"div",14)(27,"div",15)(28,"label"),t._uU(29,"Your name"),t.qZA(),t.TgZ(30,"div",16),t._UZ(31,"input",17,18),t.YNc(33,Yt,2,0,"mat-icon",19),t.YNc(34,st,2,0,"mat-icon",20),t.YNc(35,Ht,2,0,"mat-icon",21),t.qZA(),t.YNc(36,Kt,2,0,"mat-error",22),t.YNc(37,Ot,2,0,"mat-error",22),t.qZA(),t.TgZ(38,"div",15)(39,"label"),t._uU(40,"Your username"),t.qZA(),t.TgZ(41,"div",16),t._UZ(42,"input",23,24),t.YNc(44,ae,2,0,"mat-icon",19),t.YNc(45,Qt,2,0,"mat-icon",20),t.YNc(46,zt,2,0,"mat-icon",21),t.qZA(),t.YNc(47,$t,2,0,"mat-error",22),t.YNc(48,Mt,2,0,"mat-error",22),t.YNc(49,Gt,2,0,"mat-error",22),t.qZA(),t.TgZ(50,"div",15)(51,"label"),t._uU(52,"Your email"),t.qZA(),t.TgZ(53,"div",16),t._UZ(54,"input",25,26),t.YNc(56,Vt,2,0,"mat-icon",19),t.YNc(57,it,2,0,"mat-icon",20),t.YNc(58,V,2,0,"mat-icon",21),t.qZA(),t.YNc(59,Wt,2,0,"mat-error",22),t.YNc(60,ot,2,0,"mat-error",22),t.YNc(61,jt,2,0,"mat-error",22),t.YNc(62,rt,2,0,"mat-error",22),t.qZA()(),t.TgZ(63,"div",27),t.YNc(64,Pt,2,0,"button",28),t.YNc(65,p,2,0,"p",29),t.YNc(66,ct,35,18,"form",30),t.qZA()(),t._UZ(67,"app-mini-alert",31),t.qZA()}if(2&r){const e=t.MAs(14),n=t.MAs(32),s=t.MAs(43),o=t.MAs(55),a=t.oxw();t.xp6(9),t.Q6J("src",a.user.image.url,t.LSH)("alt",a.user.name),t.xp6(1),t.Q6J("matMenuTriggerFor",e),t.xp6(21),t.Q6J("formControl",a.name),t.xp6(2),t.Q6J("ngIf",n.disabled),t.xp6(1),t.Q6J("ngIf",!n.disabled),t.xp6(1),t.Q6J("ngIf",!n.disabled),t.xp6(1),t.Q6J("ngIf",a.name.hasError("minlength")&&a.name.touched),t.xp6(1),t.Q6J("ngIf",a.name.hasError("required")&&a.name.touched),t.xp6(5),t.Q6J("formControl",a.username),t.xp6(2),t.Q6J("ngIf",s.disabled),t.xp6(1),t.Q6J("ngIf",!s.disabled),t.xp6(1),t.Q6J("ngIf",!s.disabled),t.xp6(1),t.Q6J("ngIf",a.username.hasError("minlength")&&a.username.touched),t.xp6(1),t.Q6J("ngIf",a.username.hasError("required")&&a.username.touched),t.xp6(1),t.Q6J("ngIf",a.username.hasError("not_available")&&a.username.touched&&a.username.value!=a.user.username),t.xp6(5),t.Q6J("formControl",a.email),t.xp6(2),t.Q6J("ngIf",o.disabled),t.xp6(1),t.Q6J("ngIf",!o.disabled),t.xp6(1),t.Q6J("ngIf",!o.disabled),t.xp6(1),t.Q6J("ngIf",a.email.hasError("email")&&a.email.touched),t.xp6(1),t.Q6J("ngIf",a.email.hasError("not_available")&&a.email.touched&&a.email.value!=a.user.email),t.xp6(1),t.Q6J("ngIf",a.email.hasError("required")&&a.email.touched),t.xp6(1),t.Q6J("ngIf",a.email.hasError("not_valid")&&a.email.touched),t.xp6(2),t.Q6J("ngIf",!a.showChangePassword),t.xp6(1),t.Q6J("ngIf",a.okChangedPassword),t.xp6(1),t.Q6J("ngIf",a.showChangePassword),t.xp6(1),t.Q6J("eventOpenAlert",a.eventOpenAlert.asObservable())}}let W=(()=>{class r{constructor(e,n,s,o){this.authService=e,this.userService=n,this.formBuilder=s,this.store=o,this.eventOpenAlert=new b.x,this.disabled=!1,this.loadingChange=!1,this.okChangedPassword=!1,this.hide={one:!0,two:!0,three:!0},this.showChangePassword=!1,this.errChangedPassword=!1}ngOnInit(){this.store.select("user").subscribe(e=>this.user=e),this.update.subscribe(e=>{this.load()}),this.load()}load(){this.loadUser(),this.createChangePassword()}closeProfile(){const e=document.getElementById("div_profile");e.classList.add("animate__slideOutLeft"),setTimeout(()=>{e.style.display="none",e.classList.remove("animate__slideOutLeft")},500)}loadUser(){this.name=new u.NI({value:this.user.name,disabled:!0},[u.kI.required,u.kI.minLength(3)]),this.username=new u.NI({value:this.user.username,disabled:!0},[u.kI.required,u.kI.minLength(3)],$.R.validateUsername(this.authService)),this.email=new u.NI({value:this.user.email,disabled:!0},[u.kI.required,u.kI.email],[$.R.validateEmail(this.authService),$.R.emailIsValid(this.userService)])}toggleEdit(e,n=!1,s=!1){n?(e.value=s||this.user[e.name],this[e.name].value=s||this.user[e.name],e.disabled=!0,this[e.name].disable(),this[e.name].markAsUntouched()):(this[e.name].enable(),e.disabled=!1,e.focus())}toggleChangePassword(e=!0){this.loadingChange=!1,this.errChangedPassword=!1,this.showChangePassword=e}save(e){const n=e.name,s=this[n].value;this[n].valid&&(s!=this.user[n]?(this.toggleEdit(e,!0,s),this.userService.updateProfile(n,s).subscribe(o=>{this.saveUserUpdated(o)})):this.toggleEdit(e,!0))}saveUserUpdated(e){const s={token:this.authService.getAuth().token,user:e};this.authService.saveAuth(s)}createChangePassword(){this.formChangePassword=this.formBuilder.group({actual:["",[u.kI.required]],password:["",[u.kI.required,u.kI.minLength(8)]],password2:["",[u.kI.required]]},{validators:$.R.matchPasswords})}changePassword(){if(this.formChangePassword.valid){this.loadingChange=!0;const e=this.formChangePassword.get("actual").value,n=this.formChangePassword.get("password").value;this.authService.changePassword(e,n).subscribe(s=>{this.okChangedPassword=!0,this.loadingChange=!1,this.errChangedPassword=!1,this.cleanFormChangePassword()},s=>{this.errChangedPassword=!0,this.loadingChange=!1})}else this.formChangePassword.markAllAsTouched()}cleanFormChangePassword(){this.formChangePassword.reset(),this.formChangePassword.markAsUntouched(),this.formChangePassword.clearValidators(),this.toggleChangePassword(!1),this.hide={one:!0,two:!0,three:!0},setTimeout(()=>{this.okChangedPassword=!1},5e3)}get requiredChangePassword(){const e=this.formChangePassword.get("actual"),n=this.formChangePassword.get("password"),s=this.formChangePassword.get("password2");return e.hasError("required")&&e.touched||n.hasError("required")&&n.touched||s.hasError("required")&&s.touched}get dontMatch(){return this.formChangePassword.hasError("match_password")&&this.formChangePassword.get("password2").touched}get minLength(){const e=this.formChangePassword.get("password");return e.hasError("minlength")&&e.touched}viewPhoto(e){window.open(e)}removePhoto(){this.user.image.default&&"true"==this.user.image.default?(0,m.O1)(this.eventOpenAlert,"The default image is already"):((0,m.O1)(this.eventOpenAlert,"Removing profile picture..."),this.userService.updatePhoto(!1,!0).subscribe(e=>{(0,m.O1)(this.eventOpenAlert,"Profile picture removed successfully"),this.authService.updateAuthUser(e)}))}sendPhoto(e){const n=new FormData;n.append("file",e),this.userService.updatePhoto(n).subscribe(s=>{this.disabled=!1,(0,m.O1)(this.eventOpenAlert,"Profile picture updated successfully"),this.authService.updateAuthUser(s)})}uploadPhoto(e,n=!1){if(n){if(!this.disabled){const s=n.target.files[0];this.isImage(s)?(this.disabled=!0,(0,m.O1)(this.eventOpenAlert,"Uploading...",!1),document.getElementById("inputFile").value="",this.sendPhoto(s)):n.target.files.length>0&&(n.value="",(0,m.O1)(this.eventOpenAlert,"Only images allowed"))}}else this.disabled?(0,m.O1)(this.eventOpenAlert,"An image is already being uploaded, please wait...",!1):e.click()}isImage(e){return"image"===(null==e?void 0:e.type.split("/")[0])}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(L.e),t.Y36(D.K),t.Y36(u.qu),t.Y36(J.yh))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-profile"]],inputs:{update:["updateProfile","update"]},decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"header"],[1,"back",3,"click"],[1,"main"],[1,"image","animate__animated","animate__zoomIn","animate__faster","animate__delay-2s"],[1,"image_modal"],[3,"src","alt"],["mat-icon-button","","aria-label","Menu to open options to image",3,"matMenuTriggerFor"],["yPosition","above"],["menu","matMenu"],["mat-menu-item","",3,"click"],["type","file","accept","image/*","id","inputFile",2,"display","none",3,"change"],["file",""],[1,"inputs","animate__animated","animate__fadeInDown"],[1,"div_input"],[1,"border"],["type","text","matInput","","autocomplete","off","name","name",3,"formControl"],["input_name",""],["class","btn-edit",3,"click",4,"ngIf"],["class","btn-close",3,"click",4,"ngIf"],["class","btn-save",3,"click",4,"ngIf"],[4,"ngIf"],["type","text","matInput","","autocomplete","off","name","username",3,"formControl"],["input_username",""],["type","email","matInput","","autocomplete","off","name","email",3,"formControl"],["input_email",""],[1,"change_password","animate__animated","animate__fadeInDown"],["mat-raised-button","",3,"click",4,"ngIf"],["class","alert ok",4,"ngIf"],["class","div_change_password",3,"formGroup","ngSubmit",4,"ngIf"],[3,"eventOpenAlert"],[1,"btn-edit",3,"click"],[1,"btn-close",3,"click"],[1,"btn-save",3,"click"],["mat-raised-button","",3,"click"],[1,"alert","ok"],[1,"div_change_password",3,"formGroup","ngSubmit"],[1,"text"],["id","spinner-change_password",4,"ngIf"],["class","alert error",4,"ngIf"],["matInput","","formControlName","actual",3,"type"],["mat-icon-button","","matSuffix","",3,"click"],["matInput","","formControlName","password",3,"type"],["matInput","","formControlName","password2",3,"type"],[1,"btns"],["type","submit","mat-raised-button","","color","primary"],["id","spinner-change_password"],[1,"alert","error"]],template:function(e,n){1&e&&t.YNc(0,R,68,28,"div",0),2&e&&t.Q6J("ngIf",null==n.user?null:n.user.image)},dependencies:[C.O5,O.Hw,G.TO,G.KE,G.hX,G.R9,N.VK,N.OP,N.p6,S.lW,et.Ou,Dt.Nt,u._Y,u.Fj,u.JJ,u.JL,u.oH,u.sg,u.u,F.O],styles:["[_ngcontent-%COMP%]:root{--animate-delay: 0s}.animate__delay-2s[_ngcontent-%COMP%]{animation-delay:.2s!important}[_nghost-%COMP%]{display:none;position:absolute;top:0;z-index:100;height:100%;width:100%;background:#fff}.container[_ngcontent-%COMP%]{height:100%}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background:#11101d;background:#446678;background:black;height:110px;height:100px;display:flex;align-items:end;padding:20px 10px 18px 15px;color:#fff}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px;padding:0 15px 3px 13px}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer;border-radius:50px;width:30px;height:30px;display:flex;align-items:center;justify-content:center}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{background:#07070d}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{height:calc(100% - 120px);width:100%;overflow-y:auto;overflow-x:hidden;padding:25px 30px}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]::-webkit-scrollbar{width:3px}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#2e2b4e}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{position:relative;width:210px;margin:0 auto}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:210px;height:210px;object-fit:cover;border-radius:50%;display:block;margin:0 auto 20px}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not(.container   .main[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img.default)[_ngcontent-%COMP%]{box-shadow:0 0 10px #ccc}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;bottom:0;right:15px;background:#40b940;color:#fff;display:flex;justify-content:center;align-items:center}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]   .div_input[_ngcontent-%COMP%]{color:#446678;position:relative;margin-bottom:8px}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]   .div_input[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]   .div_input[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#324f5e;width:100%;padding:5px 52px 5px 0;background:none;border:none;outline:none;font-size:19px}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]   .div_input[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(.container   .main[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]   .div_input[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled){border-bottom:1px solid #446678}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]   .div_input[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer;color:#446678;position:absolute;right:0;top:24px}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]   .div_input[_ngcontent-%COMP%]   mat-icon.btn-close[_ngcontent-%COMP%]{right:25px}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .change_password[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin:8px 0;padding:5px 20px}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .div_change_password[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:10px 20px;box-shadow:0 0 4px #ccc;margin-top:20px}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .div_change_password[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{font-size:16px}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .div_change_password[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]{display:flex;justify-content:end}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .div_change_password[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:8px;margin-bottom:3px}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .div_change_password[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:15px;margin:3px 0}.alert[_ngcontent-%COMP%]{font-size:13px;color:red;width:-moz-fit-content;width:fit-content;margin-bottom:3px}.alert.error[_ngcontent-%COMP%]{color:red}.alert.ok[_ngcontent-%COMP%]{color:#22a522}"]}),r})();function q(r,i){1&r&&(t._UZ(0,"img",31),t._uU(1," Chats "))}function Z(r,i){1&r&&(t._UZ(0,"img",32),t._uU(1," Users "))}const ce=[{path:"",component:(()=>{class r{constructor(e,n,s,o,a,l){this.authService=e,this.chatService=n,this.router=s,this.socketService=o,this.store=a,this.dialog=l,this.eventOpenAlert=new b.x,this.eventUpdateChats=new b.x,this.eventUpdateProfileUser=new b.x,this.eventUpdateUsers=new b.x,this.authService.saveInStore(w.Q,!0),this.store.select("user").subscribe(g=>{this.user=g})}ngOnInit(){window.addEventListener("resize",()=>{this.appHeight()}),this.appHeight(),this.resize(this.router.url),this.subUrl=this.router.events.pipe((0,A.h)(e=>e instanceof d.m2)).subscribe(e=>{this.resize(e.url)}),this.listenMessages(),this.listenSchedules(),this.listenCalls(),this.eventUpdateChats.next(!0),this.eventUpdateProfileUser.next(!0),this.eventUpdateUsers.next(!0)}ngOnDestroy(){this.subUrl.unsubscribe(),this.subDeleteMessage.unsubscribe(),this.subReadMessages.unsubscribe(),this.subDeleteSchedule.unsubscribe(),this.subCalls.unsubscribe()}listenSchedules(){this.subDeleteSchedule=this.socketService.listen(y.N.events.SCHEDULE_DELETEMESSAGE).subscribe(e=>{null!=e&&e.send&&(0,m.O1)(this.eventOpenAlert,"A scheduled message has just been sent sent")})}appHeight(){document.documentElement.style.setProperty("--app-height",`${window.innerHeight}px`)}resize(e){"chat"!==(e=e.split("/")[1])&&"message"!==e&&(document.getElementById("chats-container").style.visibility="visible")}logout(){this.authService.logout()}openProfile(){document.getElementById("div_profile").style.display="block"}openSettings(){document.getElementById("div_settings").style.display="block"}updateChats(){this.eventUpdateChats.next(!0)}eventUpdateProfile(){this.eventUpdateProfileUser.next(!0)}updateUsers(){this.eventUpdateUsers.next(!0)}updateNoRead(e){if(!e.read&&e.to==this.user._id){let n;this.store.select("chats").forEach(l=>n=l);let s=n.filter(l=>l._id!=e.chatId);const o=n.find(l=>l._id==e.chatId),a=Object.assign(Object.assign({},o),{noRead:o.noRead+1});s.push(a),this.store.dispatch(new f.vh(this.chatService.sortChats(s)))}}thereChat(e){let n;return this.store.select("chats").forEach(s=>n=s),n.find(s=>s._id==e)}listenMessages(){this.socketService.listen(y.N.events.NEW_MESSAGE).subscribe(e=>{this.thereChat(e.chatId)?(this.store.dispatch(new f.lq({myuser:this.user,message:e})),this.store.dispatch(new h.PV({chatId:e.chatId,message:e})),e.noRead||this.updateNoRead(e)):this.updateChats()}),this.subDeleteMessage=this.socketService.listen(y.N.events.MESSAGE_DELETED).subscribe(e=>{let n;this.store.dispatch(new h.$6({messageId:e._id,chatId:e.chatId})),this.store.select("messages").forEach(s=>{s.forEach(o=>{o.chatId!=e.chatId||(n=o.messages)})}),this.updateChats()}),this.subReadMessages=this.socketService.listen(y.N.events.READ_MESSAGES).subscribe(e=>{this.store.dispatch(new f.Vo({chatId:e.chatId}))})}listenCalls(){var e=this;this.subCalls=this.socketService.listen(y.N.events.CALL_INCOMING).subscribe(function(){var n=(0,v.Z)(function*(s){e.dialog.open(At,{data:s,panelClass:"modal_incoming_call"}).afterClosed().subscribe(a=>{a.answer&&e.router.navigate(["/call",s.id])})});return function(s){return n.apply(this,arguments)}}())}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(L.e),t.Y36(B.a),t.Y36(d.F0),t.Y36(ut.$),t.Y36(J.yh),t.Y36(U.uw))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-main"]],decls:67,vars:9,consts:[[1,"container"],["id","chats-container",1,"chats-container"],[1,"header"],[1,"header__top"],[1,"me"],[3,"src","alt"],[1,"div-menu"],["mat-icon-button","","aria-label","menu",3,"matMenuTriggerFor"],[1,"icon-menu"],["xPosition","before",1,"main-menu"],["menu","matMenu"],[1,"item-menu"],["mat-menu-item","",3,"click"],[1,"mr-icon"],["mat-menu-item","",3,"matMenuTriggerFor"],[2,"margin-right","7px"],[1,"main-menu"],["menuMessages","matMenu"],["routerLink","/message/multiple",1,"item-menu"],["mat-menu-item",""],["routerLink","/message/schedule",1,"item-menu"],[1,"header__bottom"],["mat-stretch-tabs","","color","primary","backgroundColor","primary",1,"tabs"],["mat-tab-label",""],[1,"app-chats"],[3,"updateChats"],[3,"updateUsers","chatsUpdated"],["id","div_profile",1,"app-profile","animate__animated","animate__slideInLeft","animate__faster",3,"updateProfile"],["id","div_settings",1,"app-profile","animate__animated","animate__slideInLeft","animate__faster"],[1,"chat-container"],[3,"eventOpenAlert"],["src","assets/images/chat-icon.png","alt","messages icon"],["src","assets/images/users-icon.png","alt","users icon"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"header",2)(3,"div",3)(4,"div",4),t._UZ(5,"img",5),t.TgZ(6,"p"),t._uU(7),t.qZA()(),t.TgZ(8,"div",6)(9,"button",7)(10,"mat-icon",8),t._uU(11,"more_vert"),t.qZA()(),t.TgZ(12,"mat-menu",9,10)(14,"div",11)(15,"div",12),t.NdJ("click",function(){return n.openProfile()}),t.TgZ(16,"mat-icon",13),t._uU(17,"person_pin"),t.qZA(),t.TgZ(18,"span"),t._uU(19,"Profile"),t.qZA()()(),t.TgZ(20,"div",11)(21,"div",14)(22,"mat-icon",15),t._uU(23," message"),t.qZA(),t.TgZ(24,"span"),t._uU(25,"Messages"),t.qZA()()(),t.TgZ(26,"mat-menu",16,17)(28,"div",18)(29,"div",19)(30,"mat-icon"),t._uU(31,"people"),t.qZA(),t.TgZ(32,"span"),t._uU(33,"Send multiple"),t.qZA()()(),t.TgZ(34,"div",20)(35,"div",19)(36,"mat-icon"),t._uU(37,"access_time"),t.qZA(),t.TgZ(38,"span"),t._uU(39,"Schedule"),t.qZA()()()(),t.TgZ(40,"div",11)(41,"div",12),t.NdJ("click",function(){return n.openSettings()}),t.TgZ(42,"mat-icon",13),t._uU(43,"settings"),t.qZA(),t.TgZ(44,"span"),t._uU(45,"Settings"),t.qZA()()(),t.TgZ(46,"div",11)(47,"span",12),t.NdJ("click",function(){return n.logout()}),t.TgZ(48,"mat-icon",13),t._uU(49,"exit_to_app"),t.qZA(),t.TgZ(50,"span"),t._uU(51,"Logout"),t.qZA()()()()()(),t.TgZ(52,"div",21)(53,"mat-tab-group",22)(54,"mat-tab"),t.YNc(55,q,2,0,"ng-template",23),t.TgZ(56,"div",24),t._UZ(57,"app-chats",25),t.qZA()(),t.TgZ(58,"mat-tab"),t.YNc(59,Z,2,0,"ng-template",23),t.TgZ(60,"div",24)(61,"app-users",26),t.NdJ("chatsUpdated",function(){return n.updateChats()}),t.qZA()()()()()(),t._UZ(62,"app-profile",27)(63,"app-settings",28),t.qZA(),t.TgZ(64,"div",29),t._UZ(65,"router-outlet"),t.qZA()(),t._UZ(66,"app-mini-alert",30)),2&e){const s=t.MAs(13),o=t.MAs(27);t.xp6(5),t.Q6J("src",n.user.image.url,t.LSH)("alt",n.user.name),t.xp6(2),t.Oqu(n.user.name),t.xp6(2),t.Q6J("matMenuTriggerFor",s),t.xp6(12),t.Q6J("matMenuTriggerFor",o),t.xp6(36),t.Q6J("updateChats",n.eventUpdateChats),t.xp6(4),t.Q6J("updateUsers",n.eventUpdateUsers),t.xp6(1),t.Q6J("updateProfile",n.eventUpdateProfileUser),t.xp6(4),t.Q6J("eventOpenAlert",n.eventOpenAlert.asObservable())}},dependencies:[d.lC,d.rH,O.Hw,N.VK,N.OP,N.p6,S.lW,tt.SP,tt.uD,tt.uX,F.O,Zt,bt,xt,W],styles:["[_ngcontent-%COMP%]:root{--app-height: 100%}.app-profile.animate__faster[_ngcontent-%COMP%]{--animate-duration: .7s}.chats-container[_ngcontent-%COMP%]{border-right:1px solid #c3cbcf;height:100%}.chat-container[_ngcontent-%COMP%]{max-width:calc(100vw - 410px)}.header__top[_ngcontent-%COMP%]{align-items:center;background:#11101d;color:#fff;display:grid;grid-template-columns:1fr 40px;padding:10px 20px 0}.header[_ngcontent-%COMP%]   .me[_ngcontent-%COMP%]{display:flex;align-items:center;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.header[_ngcontent-%COMP%]   .me[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{cursor:default;font-size:21px;text-overflow:ellipsis;overflow:hidden}.header[_ngcontent-%COMP%]   .me[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50px;height:40px;width:40px;object-fit:cover;margin-right:12px}.header[_ngcontent-%COMP%]   .icon-menu[_ngcontent-%COMP%]{transform:scale(1.5)}.header__bottom[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:10px}.item-menu[_ngcontent-%COMP%]{background:#fff;border-radius:50px;box-shadow:0 1px 1px #ccc;color:#fff;margin-top:10px}.item-menu[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;align-items:center}.item-menu[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .item-menu[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#757575}.item-menu[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:inline-block;margin:0 15px 0 5px;transform:scale(1.8)}.chats-container[_ngcontent-%COMP%]{position:relative;z-index:20;visibility:hidden}.mr-icon[_ngcontent-%COMP%]{margin-right:7px!important}.app-chats[_ngcontent-%COMP%]{max-height:100%;overflow-y:auto;height:calc(var(--app-height) - 98px)}.app-chats[_ngcontent-%COMP%]::-webkit-scrollbar{width:3px}.app-chats[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#2e2b4e}@media (min-width: 1024px){.header[_ngcontent-%COMP%]   .me[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block}.container[_ngcontent-%COMP%]{display:grid;grid-template-columns:410px 1fr}.chats-container[_ngcontent-%COMP%]{display:block;visibility:visible}.app-chats[_ngcontent-%COMP%]{height:calc(100vh - 98px)}}@media (min-width: 1651px){.chats-container[_ngcontent-%COMP%]{border:1px solid #f1f1f1}}"]}),r})(),children:[{path:"",component:x},{path:"chat/:id",loadChildren:()=>Promise.all([c.e(812),c.e(772),c.e(387)]).then(c.bind(c,387)).then(r=>r.ChatModule)},{path:"call/:idPeer",loadChildren:()=>Promise.all([c.e(812),c.e(414)]).then(c.bind(c,2414)).then(r=>r.CallModule)},{path:"message",loadChildren:()=>Promise.all([c.e(772),c.e(656)]).then(c.bind(c,3656)).then(r=>r.MessageModule)}]},{path:"**",redirectTo:"/"}];let le=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[d.Bz.forChild(ce),d.Bz]}),r})();var he=c(793),wt=c(4466);let se=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[C.ez,le,he.q,u.UX,wt.m]}),r})()},1054:(ht,k,c)=>{c.d(k,{p:()=>u});var C=c(5e3);let u=(()=>{class d{transform(x){return`https://www.google.com/maps?q=${x.latitud},${x.longitud}&z=17&hl=es`}}return d.\u0275fac=function(x){return new(x||d)},d.\u0275pipe=C.Yjl({name:"location",type:d,pure:!0}),d})()},5861:(ht,k,c)=>{function C(d,t,x,v,b,A,y){try{var w=d[A](y),h=w.value}catch(f){return void x(f)}w.done?t(h):Promise.resolve(h).then(v,b)}function u(d){return function(){var t=this,x=arguments;return new Promise(function(v,b){var A=d.apply(t,x);function y(h){C(A,v,b,y,w,"next",h)}function w(h){C(A,v,b,y,w,"throw",h)}y(void 0)})}}c.d(k,{Z:()=>u})}}]);